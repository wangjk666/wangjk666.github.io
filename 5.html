<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
		<title>烟花动画特效</title>
	</head>
	<link href="css/default.css" type="text/css" rel="stylesheet">
	<script src="js/lib/jquery.min.js" type="text/javascript"></script>
	<script src="js/lib/jquery.fireworks.js" type="text/javascript"></script>

	<style type="text/css">
		* {
			-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
			-webkit-box-sizing: border-box;
			box-sizing: border-box;
		}
		
		html {
			width: 100%;
			height: 100%;
		}
		
		body {
			margin: 0 auto;
			background: #0b3443;
			color: #f0f0f0;
		}
		
		.share_img {
			width: 0;
			height: 0;
			overflow: hidden;
			opacity: 0;
		}
		
		.content {
			margin-left: 445px;
		}
		
		.text_wrapper {
			display: -webkit-box;
			display: flex;
		}
		
		.text_wrapper .text {
			padding-top: 20px;
			padding-left: 20px;
		}
		
		.hide {
			display: none !important;
		}
		
		p {
			margin: 0;
		}
		
		.btn-groups {
			padding-right: 20px;
			text-align: center;
		}
		
		.heart-btn {
			display: inline-block;
			animation: breath 0.8s linear 0s infinite both;
			-webkit-animation: breath 0.8s linear 0s infinite both;
		}
		
		.btn {
			position: relative;
			display: inline-block;
			width: 60px;
			height: 60px;
			margin: 0 30px;
			transform: rotate(45deg);
			-webkit-transform: rotate(45deg);
			cursor: pointer;
		}
		
		.btn span {
			display: block;
			width: 100%;
			height: 100%;
			line-height: 60px;
			margin-top: -10px;
			margin-left: -10px;
			text-align: center;
			transform: rotate(-45deg);
			-webkit-transform: rotate(-45deg);
		}
		
		.btn-a {
			background: #d26ae5;
		}
		
		.btn-b {
			background: #c9c9c9;
		}
		
		.btn-a:before {
			content: '';
			position: absolute;
			display: block;
			width: 30px;
			height: 60px;
			background: #d26ae5;
			left: -29px;
			top: 0;
			border-top-left-radius: 60px;
			border-bottom-left-radius: 60px;
		}
		
		.btn-a:after {
			content: '';
			position: absolute;
			display: block;
			width: 60px;
			height: 30px;
			background: #d26ae5;
			left: 0;
			top: -29px;
			border-top-left-radius: 60px;
			border-top-right-radius: 60px;
		}
		
		.btn-b:before {
			content: '';
			position: absolute;
			display: block;
			width: 30px;
			height: 60px;
			background: #c9c9c9;
			left: -29px;
			top: 0;
			border-top-left-radius: 60px;
			border-bottom-left-radius: 60px;
		}
		
		.btn-b:after {
			content: '';
			position: absolute;
			display: block;
			width: 60px;
			height: 30px;
			background: #c9c9c9;
			left: 0;
			top: -29px;
			border-top-left-radius: 60px;
			border-top-right-radius: 60px;
		}
		
		.container {}
		
		.container .mask {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.3);
		}
		
		.container .modal {
			width: 20%;
			height: 160px;
			position: absolute;
			top: 50%;
			left: 50%;
			padding: 20px 15px;
			border-radius: 5px;
			transform: translate(-50%, -70%);
			-webkit-transform: translate(-50%，-70%);
			background: #f3f3f3;
			opacity: 0.8;
		}
		
		.container .modal p {
			margin-top: 20px;
			margin-bottom: 20px;
			font-size: 16px;
			color: #353535;
			text-align: center;
		}
		
		.confirm {
			display: block;
			width: 120px;
			height: 40px;
			margin: 0 auto;
			border: none;
			font-size: 16px;
			border-radius: 5px;
			color: #ffffff;
			background: #f45cae;
			outline: none;
			cursor: pointer;
		}
		
		.type_words {
			padding: 12px 20px;
		}
		
		@keyframes breath {
			0% {
				transform: scale3d(1, 1, 1);
				-webkit-transform: scale3d(1, 1, 1);
				transform-origin: 50% 50%;
			}
			50% {
				transform: scale3d(1.02, 1.02, 1.02);
				-webkit-transform: scale3d(1.02, 1.02, 1.02);
				transform-origin: 50% 50%;
			}
			100% {
				transform: scale3d(1, 1, 1);
				-webkit-transform: scale3d(1, 1, 1);
				transform-origin: 50% 50%;
			}
		}
		#messages{
			text-align: center;
			color:white;
		}
	</style>

	<script type="text/javascript">
		$(function() {
			$('#yes').click(function(event) {
				modal('我就知道你一定会愿意的。(^_^)', function() {
					$('.page_one').addClass('hide');
					$('.page_two').removeClass('hide');
					// typeWrite();
					fireworks();
				});
			});
			$('#no').click(function(event) {
				modal('明人不说暗话！', A);
			});
		});

		function A() {
			modal('我喜欢你！', B);
		}

		function B() {
			modal('我知道你在等我这一句话', C);
		}

		function C() {
			modal('请您不要拒绝我', D);
		}

		function D() {
			modal('拒绝我，不存在的', E);
		}

		function E() {
			modal('这辈子都不可能让你离开我', F);
		}

		function F() {
			modal('跟我走吧', G);
		}

		function G() {
			modal('房产证上写你名', H);
		}

		function H() {
			modal('我会做饭', I);
		}

		function I() {
			modal('爱你，么么哒！', J)
		}

		function J() {
			modal('行，我们去民政局登记吧', function() {
				fireworks();
			});
		}

		function fireworks() {
			$('.page_one').addClass('hide');
			$('.page_two').removeClass('hide');
			$('.page_two').fireworks({
				sound: false,
				opacity: 0.9,
				width: '100%',
				height: '100%'
			});
		}

		function modal(content, callback) {
			var tpl = '<div class="container">' +
				'<div class="mask"></div>' +
				'<div class="modal">' +
				'<p>' + content + '</p>' +
				'<button type="button" id="confirm" class="confirm">确定</button>' +
				'</div>' +
				'</div>';
			$('body').append(tpl);
			$(document).on('click', '.confirm', function() {
				$('.container').remove();
				callback();
			});
		}
	</script>
	<body>
    <audio src="./我保护你.mp3" autoplay></audio>
    <script>
      var au = document.body.querySelector("audio")
      console.log(au)
      window.onclick = function() {
        au.play()
      }
    </script>
		<div class="share_img"><img src="images/a8b.png" alt=""></div>
		<div class="page_one">
			<div class="content">
				<div class="text_wrapper">
					<img src="images/a8.png" alt="">
					<div class="text">
						小祁同学，我喜欢你，你愿意做我女朋友吗？（先别急着选择，下面有段话）
					</div>
				</div>
			</div>
			<div class="btn-groups">
				<div class="heart-btn">
					<div id="yes" class="btn btn-a"><span>愿意</span></div>
				</div>
				<div id="no" class="btn btn-b"><span>不愿意</span></div>
			</div>
		</div>
		<div class="page_two hide">
			<div class="type_words"></div>
		</div>
        <div id="content">
            <div id="code">
                <span class="comments"></span><br />
                <span /><span class="comments">小祁同学：今天是2020年2月19日。</span><br />
                <span /><span class="comments">我想告诉你一个秘密。 </span><br />
                <span /><span class="comments">虽然，我不是一个很擅长表达言语的人。 </span><br />
                <span /><span class="comments">但我希望你能看到这段话。</span><br />
                <span /><span style="color: red;">我喜欢你</span><br />
                <span class="comments">今天是2月19日。 </span><br />
                <span class="comments">我做了一个很重要的决定。</span><br />
                <span class="comments">我想和你在一起。</span><br />
                <span class="comments">那天和你聊了之后，我好像想明白了自己是个怎样的人。</span><br />
                <span class="comments">我其实应该不算太傻吧，我知道该怎样表达让一个开心、虽然有时候会直男。</span><br />
                <span class="comments">我知道该怎样默默地喜欢一个人、我知道在自己喜欢的人不开心的时候我需要怎么陪伴她。</span><br />
                <span class="comments">只是之前的我呢，没有遇到一个让自己心动的人。</span><br />
                <span class="comments">一个让自己有呵护她的愿望的人。</span><br />
                <span class="comments">可是，在一起聊了那么多天、在一起看了电影、一起在咖啡厅里聊了天之后，我清晰地感觉到：这是心动的感觉。 </span><br />
                <span class="comments">或许我们认识的时间并不长，但我通过和你的相处能知道你是个特别好的女孩子。 </span><br />
                <span class="comments">我喜欢你、我不想错过。 </span><br />
                <span class="comments">我希望以后一起看电影你哭的稀里哗啦的时候我可以拉着你的手让你知道我在身边、我希望以后你不开心的时候我都可以用自己的魔法让你远离所有烦恼、我希望陪你一起考研、一起看看这个世界，我想和你一起度过生命里所有重要的时刻。</span><br />
                
			</div>
			<div id="loveHeart">
				<canvas id="garden"></canvas>
				<div id="words">
					<div id="messages">
						我相信这种喜欢既是一见钟情、也是日久生情。
					</div>
				</div>
			</div>
        </div>
        <script type="text/javascript">
            var offsetX = $("#loveHeart").width() / 2;
            var offsetY = $("#loveHeart").height() / 2 - 55;
            var together = new Date();

            if(!document.createElement('canvas').getContext) {
                var msg = document.createElement("div");
                msg.id = "errorMsg";
                msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+";
                document.body.appendChild(msg);
                $("#code").css("display", "none")
                $("#copyright").css("position", "absolute");
                $("#copyright").css("bottom", "10px");
                document.execCommand("stop");
            } else {
                setTimeout(function() {
                    startHeartAnimation();
                }, 5000);

                timeElapse(together);
                setInterval(function() {
                    timeElapse(together);
                }, 500);

                adjustCodePosition();
                $("#code").typewriter();
            }
        </script>

    </body>
</html>